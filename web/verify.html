<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Verification</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body style="background-color: #f8f9fa;">
    <div class="container d-flex justify-content-center align-items-center" style="height: 100vh;">
        <div class="text-center p-5 shadow-lg rounded" style="background-color: white; max-width: 500px; width: 100%;">
            <h2>Email Verification Sent</h2>
            <p class="mt-3" style="font-size: 1rem;">
                We've sent you an email with a 5-digit code to confirm your account. Please check your inbox or spam
                folder. Once your email is verified, you can log in to your account.
            </p>

            <!-- Email input field -->
            <div class="mt-4">
                <label for="email" class="form-label" style="font-size: 1rem;">Enter your email</label>
                <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
            </div>

            <!-- Verification code input field -->
            <div class="mt-4">
                <label for="verificationCode" class="form-label" style="font-size: 1rem;">Enter the verification
                    code</label>
                <input type="text" id="verificationCode" class="form-control" placeholder="Enter the code" maxlength="6"
                    required>
            </div>

            <!-- Buttons -->
            <a href="#" class="btn mt-4 px-5 text-white" style="background-color: #7b4d29" id="verifyButton">Verify
                Code</a>
            <a href="/login" class="btn mt-2 px-5 text-white" style="background-color: #7b4d29">Go to Login</a>
        </div>
    </div>

    <script>
        // Event listener for the "Verify Code" button
        document.getElementById("verifyButton").addEventListener("click", function (event) {
            event.preventDefault();
            const email = document.getElementById("email").value;
            const verificationCode = document.getElementById("verificationCode").value;

            // Validate the inputs
            if (email && verificationCode.length === 6) {
                // Prepare the JSON data
                const data = {
                    email: email,
                    code: verificationCode
                };

                // Send a POST request to verify the code
                fetch("/verify", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert("Email verified successfully!");
                        } else {
                            alert("Invalid code. Please try again.");
                        }
                    })
                    .catch(error => {
                        alert("Error: " + error.message);
                    });
            } else {
                alert("Please enter a valid email and a 6-digit verification code.");
            }
        });
    </script>

</body>

</html>